{"version":3,"sources":["webpack:///./test/language/deferred-binding.test.js","webpack:///./test/language/lib.js","webpack:///./test/statestack.test.js","webpack:///./src/js/state-machine.js"],"names":["describe","canary","it","should","equal","finch","not","a","b","lib","registerLib","ob","TestState","constructor","enter","sinon","spy","exit","stack","beforeEach","newState","push","top","called","be","true","false","replace","exist","StateStack","states","next","leaving","shift","unshift","pop","StateGroup","context","last","forEach","state","first","State"],"mappings":"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","file":"test.bundle.js","sourcesContent":["import {lib, registerLib} from './lib.js'\n\ndescribe('', function() {\n    const canary = {};\n\n    registerLib(canary);\n\n    it('should be the same as the registered object', function() {\n        canary.should.equal(lib);\n    });\n\n    it('should be rebindable', function() {\n        const finch = {};\n        registerLib(finch);\n        finch.should.equal(lib);\n        canary.should.not.equal(lib);\n    });\n\n    it('is different', function() {\n        let a = {};\n        let b = a;\n        a = {};\n        a.should.not.equal(b);\n    })\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/language/deferred-binding.test.js","let lib;\n\nfunction registerLib(ob) {\n    lib = ob;\n}\n\nexport {lib, registerLib};\n\n\n\n// WEBPACK FOOTER //\n// ./test/language/lib.js","import {State, StateStack} from 'state-machine.js'\n\nclass TestState extends State {\n    constructor() {\n        super();\n        this.enter = sinon.spy();\n        this.exit = sinon.spy();\n    }\n}\n\ndescribe('StateStack', function() {\n    let stack = new StateStack();\n\n    beforeEach(function() {\n        stack = new StateStack();\n    });\n\n    describe('#push', function() {\n        let newState;\n\n        beforeEach(function() {\n            newState = new TestState();\n            stack.push(newState);\n        });\n\n        it(\"should push the stack\", function() {\n            stack.top().should.equal(newState);\n        });\n\n        it(\"calls enter on incoming state\", function() {\n            newState.enter.called.should.be.true;\n        });\n\n        describe(\"with a non-empty stack\", function() {\n            it(\"calls exit on top of stack\", function() {\n                newState.exit.called.should.be.false;\n                stack.push(new TestState());\n                newState.exit.called.should.be.true;\n            });\n        });\n    });\n\n    describe('#replace', function() {\n        describe('with a non-empty stack', function() {\n            it('should replace top', function() {\n                stack.push(new TestState());\n                const newState = new TestState();\n                stack.top().should.not.equal(newState);\n                stack.replace(newState);\n                stack.top().should.equal(newState);\n            });\n\n            it('calls exit on top', function() {\n                const newState = new TestState();\n\n                stack.replace(newState);\n                stack.replace(new TestState());\n\n                newState.exit.called.should.be.true;\n            });\n        });\n\n        it('should replace top', function() {\n            const newState = new TestState();\n            should.not.exist(stack.top());\n            stack.replace(newState);\n            stack.top().should.equal(newState);\n        });\n\n        it('calls enter on incoming state', function() {\n            const newState = new TestState();\n            stack.replace(newState);\n            newState.enter.called.should.be.true;\n        });\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/statestack.test.js","class StateStack {\n    constructor() {\n        this.states = [];\n    }\n\n    replace(next) {\n        const leaving = this.states.shift();\n        if (leaving) {\n            leaving.exit(next);\n        }\n        this.states.unshift(next)\n        next.enter(leaving || null);\n    }\n\n    push(next) {\n        const leaving = this.states[0] || null;\n        this.states.unshift(next);\n        if (leaving) {\n            leaving.exit(next);\n        }\n        if (next) {\n            next.enter(leaving);\n        }\n    }\n\n    pop() {\n        const leaving = this.states.shift() || null;\n        const next = this.states[0] || null;\n        if (leaving) {\n            leaving.exit(next);\n        }\n        if (next) {\n            next.enter(leaving);\n        }\n    }\n\n    top() {\n        return this.states[0] || null;\n    }\n}\n\nclass StateGroup {\n    constructor(states, context) {\n        this.states = states;\n        this.context = context;\n    }\n\n    enter(last) {\n        this.states.forEach(state => state.enter(last, this.context));\n    }\n\n    exit(next) {\n        this.states.forEach(state => state.exit(next, this.context));\n    }\n\n    first() {\n        return this.states[0];\n    }\n}\n\nclass State {\n    enter(last) {\n\n    }\n\n    exit(next) {\n\n    }\n}\n\nexport {State, StateStack, StateGroup};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/state-machine.js"],"sourceRoot":""}